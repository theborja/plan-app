
---

# ğŸ“„ Documento de DiseÃ±o

## Login â€“ Fitness Nutrition App (v1)

---

# 1ï¸âƒ£ Objetivo

Implementar una pantalla de login:

* Visualmente similar a la referencia (card central, fondo suave, minimalista)
* Mobile-first
* Sin:

  * âŒ Reset password
  * âŒ Social login
  * âŒ Registro desde esta pantalla
* AutenticaciÃ³n contra un **JSON de usuarios ya existente**
* ProtecciÃ³n automÃ¡tica de rutas:

  * Si NO estÃ¡s logado â†’ redirige a `/login`
  * Si estÃ¡s logado â†’ accedes a la app
  * Si intentas ir a `/login` estando logado â†’ redirige a `/today`

---

# 2ï¸âƒ£ Arquitectura de AutenticaciÃ³n

## ğŸ” Modelo de Datos

Existe un archivo:

```
/data/users.json
```

Formato esperado:

```json
[
  {
    "id": "1",
    "email": "user@test.com",
    "password": "123456",
    "name": "Borja"
  }
]
```

âš  En esta versiÃ³n MVP la contraseÃ±a puede ser plain text.
(Se puede mejorar despuÃ©s con hashing en cliente si se desea.)

---

## ğŸ’¾ Persistencia de SesiÃ³n

Se guardarÃ¡ en:

```
localStorage key: auth_v1
```

Formato:

```json
{
  "version": 1,
  "isAuthenticated": true,
  "userId": "1",
  "email": "user@test.com",
  "loginAt": "2026-02-20T10:22:00Z"
}
```

---

# 3ï¸âƒ£ ProtecciÃ³n de Rutas (Routing Strategy)

## ğŸ›¡ Regla Global

Las siguientes rutas requieren autenticaciÃ³n:

* `/today`
* `/workout`
* `/import`
* `/settings`

Ruta pÃºblica:

* `/login`

---

## ğŸ” Comportamiento

### Caso 1 â€“ Usuario NO logado

* Accede a `/today`
* Sistema detecta que no existe `auth_v1`
* Redirige automÃ¡ticamente a `/login`

### Caso 2 â€“ Usuario logado

* Accede a `/login`
* Sistema detecta sesiÃ³n activa
* Redirige automÃ¡ticamente a `/today`

---

## ğŸ§  ImplementaciÃ³n Recomendada (Next.js App Router)

* Crear:

  ```
  lib/auth.ts
  hooks/useAuth.ts
  components/AuthGuard.tsx
  ```

* En layout principal envolver pÃ¡ginas privadas con `<AuthGuard>`.

---

# 4ï¸âƒ£ DiseÃ±o Visual (Inspirado en referencia)

## ğŸ¨ EstÃ©tica General

* Fondo gris claro
* Card blanca central
* Header centrado con nombre app
* Inputs redondeados
* BotÃ³n primario azul

---

# 5ï¸âƒ£ Layout Mobile-First

## ğŸ“± Estructura Vertical

```
[ Safe area ]

App Name (centrado)

[ Espacio ]

[ Card blanca ]

  Welcome back
  Log in to continue

  Email input
  Password input

  Remember me (opcional)

  Login button
```

---

# 6ï¸âƒ£ Componentes UI

## ğŸ”¹ Fondo

* bg-gray-100
* min-h-screen
* flex
* justify-center
* items-center
* px-4

---

## ğŸ”¹ Header

* Texto centrado
* Color primario
* font-semibold
* text-2xl

Ejemplo:

```
FitPlan
```

---

## ğŸ”¹ Card

Propiedades:

* bg-white
* rounded-2xl
* shadow-xl
* p-6
* w-full
* max-w-md

---

## ğŸ”¹ Inputs

### Estilo base

* w-full
* bg-gray-100
* rounded-xl
* px-4
* py-3
* text-sm
* focus:ring-2 focus:ring-blue-500
* outline-none

---

## ğŸ”¹ BotÃ³n Login

* w-full
* py-3
* rounded-xl
* bg-blue-600
* text-white
* font-semibold
* hover:bg-blue-700
* active:scale-95
* transition

---

# 7ï¸âƒ£ Estados UI

## Estado Inicial

* Inputs vacÃ­os
* BotÃ³n activo

## Estado Error

* Mensaje debajo del input:

  * "Invalid email or password"
* Borde rojo

## Estado Loading

* BotÃ³n deshabilitado
* Spinner inline

---

# 8ï¸âƒ£ LÃ³gica de Login

## Flujo

1. Usuario introduce email + password
2. Click Login
3. Validaciones:

   * Email no vacÃ­o
   * Password no vacÃ­o
4. Buscar en `users.json`
5. Si match:

   * Guardar auth_v1
   * Redirigir a `/today`
6. Si no:

   * Mostrar error

---

# 9ï¸âƒ£ Hook useAuth

Debe exponer:

```ts
{
  user,
  isAuthenticated,
  login(email, password),
  logout()
}
```

### logout()

* Elimina `auth_v1`
* Redirige a `/login`

---

# ğŸ”Ÿ AuthGuard Component

FunciÃ³n:

```tsx
if (!isAuthenticated) {
  redirect('/login')
}
```

TambiÃ©n debe manejar estado loading para evitar flicker.

---

# 1ï¸âƒ£1ï¸âƒ£ Seguridad BÃ¡sica MVP

* No guardar password en sesiÃ³n
* No exponer users.json completo en producciÃ³n (en MVP puede estar en public o importado estÃ¡ticamente)
* ValidaciÃ³n estricta de estructura JSON

---

# 1ï¸âƒ£2ï¸âƒ£ UX Consideraciones

âœ” Autofocus en email
âœ” Submit con Enter
âœ” Mensaje error claro
âœ” No mostrar detalles del error (no decir si el email existe o no)
âœ” TransiciÃ³n suave al entrar

---

# 1ï¸âƒ£3ï¸âƒ£ Estructura de Archivos Recomendada

```
/app/login/page.tsx
/components/AuthGuard.tsx
/hooks/useAuth.ts
/lib/auth.ts
/data/users.json
```

---

# 1ï¸âƒ£4ï¸âƒ£ Flujo Completo de Usuario

1. Abre la app
2. Si no hay sesiÃ³n â†’ Login
3. Introduce credenciales
4. Entra a Today
5. Navega normalmente
6. Logout desde Settings
7. Redirige a Login

---

# 1ï¸âƒ£5ï¸âƒ£ Decisiones Deliberadas

âœ” No hay reset password
âœ” No hay registro
âœ” No hay OAuth
âœ” AutenticaciÃ³n simple JSON local
âœ” ProtecciÃ³n solo client-side

---
